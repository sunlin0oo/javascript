<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 自己写的
        // var oneEditAway = function(first, second) {
        //     if(Math.abs(first.length - second.length) > 1) return false;
        //     if(first.length ===0 || second.length === 0){
        //         if(Math.abs(first.length - second.length) < 2) return true
        //     }
        //     let firstIndex = 0;
        //     let secondIndex = 0;    
        //     if(first.length ===second.length){
        //         let different = 0
        //         while((firstIndex<first.length) || (secondIndex<second.length)){
        //             if(first[firstIndex]!==second[secondIndex]){
        //                 different++;
        //             }
        //             if(different > 1) return false;
        //             firstIndex++;
        //             secondIndex++;
        //         }
        //     }else if(first.length > second.length){
        //         while((firstIndex<first.length) || (secondIndex<second.length)){
        //             if(first[firstIndex]!==second[secondIndex]){
        //                 if(first[firstIndex+1]!==second[secondIndex]) return false;
        //             }
        //             firstIndex++;
        //             secondIndex++;
        //         }
        //     }else{
        //         let flag = 0;
        //         while((firstIndex<first.length) || (secondIndex<second.length)){
        //             if(first[firstIndex]!==second[secondIndex]){
        //                 flag ++;
        //                 secondIndex++;
        //             }else{
        //                 firstIndex++;
        //                 secondIndex++;
        //             }
        //             if(flag >1) return false;
        //         }
        //     }
        //     return true
        // };

        // 官方
        var oneEditAway = function(first, second) {
            // 记录两个字符串长度
            const m = first.length, n = second.length;
            if (n - m === 1) {
                return oneInsert(first, second);
            } else if (m - n === 1) {
                return oneInsert(second, first);
            } else if (m === n) {//判断差异性，差异性大于1返回
                let foundDifference = false;
                for (let i = 0; i < m; i++) {
                    if (first[i] != second[i]) {
                        if (!foundDifference) {
                            foundDifference = true;
                        } else {
                            return false;
                        }
                    }
                }
                return true;
            } else {
                return false;
            }
        }

        const oneInsert = (shorter, longer) => {
            const length1 = shorter.length, length2 = longer.length;
            // 双指针指向字母，索引差异大于1则有太多差异
            let index1 = 0, index2 = 0;
            while (index1 < length1 && index2 < length2) {
                if (shorter[index1] == longer[index2]) {
                    index1++;
                }
                index2++;
                if (index2 - index1 > 1) {
                    return false;
                }
            }
            return true;
        };
    </script>
</body>
</html>