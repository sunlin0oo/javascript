<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./js/Utils.js"></script>
</head>

<body>

    <!-- <img src="./img/1.jpg">;
    <script>
        var img = document.querySelector("img");//img相当于是图片容器，当图片塞到容器中才会撑大---获取不到宽度
    </script> -->

    <script>


        // var img=new Image();//先创建一张图片对象
        // img.addEventListener("load",loadHandler);
        // console.log("我执行了")
        // img.src="./img/1.jpg";//src：设置或返回图像的 URL
        // // 直接获取到图片的宽度（高度）是缓存的信息


        // function loadHandler(e){  // 预加载
        //     console.log(this)
        //     img.src="./img/2.jpg"
        // }


        // var sum = 0;
        // var img = new Image();
        // img.src = "./img/1.jpg";  //全局变量
        // img.onload = function () {
        //
        //     sum += this.width
        //     var img = new Image(); //局部变量
        //     img.src = "./img/2.jpg";
        //     img.onload = function () {
        //         sum += this.width
        //         var img = new Image();
        //         img.src = "./img/3.jpg";
        //         img.onload = function () {
        //             sum += this.width
        //             fn(sum);
        //         }
        //     }
        // }


        // function fn(s){
        //     console.log(s)
        // }


        // sum=0;
        // var s=0;
        // for(var i=1;i<13;i++){
        //     var img=new Image();
        //     img.src="./img/"+i+".jpg";
        //     img.n=i;
        //     s++;
        //     img.onload=function(e){
        //        sum+=this.width;
        //        console.log(this.n,this.src);
        //        if(s===12){
        //         console.log(sum)
        //        }
        //     }
        // console.log("执行")//执行完12次之后去进行onload函数
        // }

    //    var n=1;
    //    var arr=[];
    //     function loadImage(){
    //         var img=new Image();
    //         img.src="./img/"+n+".jpg";
    //         img.addEventListener("load",loadHandler);
    //     }


    //     function loadHandler(e){
    //         arr.push(this);
    //         n++;
    //         if(n>12){
    //             return loadFinishHanlder();
    //         }
    //         loadImage();
    //     }

    //     function loadFinishHanlder(){
    //         console.log(arr);
    //         arr.forEach(function(item){
    //             console.log(item.src,item.width);
    //         })
    //     }


        // loadImage();


    //     var n=1;
    //    var arr=[];
    //     function loadImage(){
    //         var img=new Image();
    //         img.src="./img/"+n+".jpg";
    //         img.addEventListener("load",loadHandler);
    //     }


    //     function loadHandler(e){
    //         arr.push(this);
    //         this.removeEventListener("load",loadHandler);
    //         n++;
    //         if(n>12){
    //             return loadFinishHanlder();
    //         }
    //         loadImage();
    //     }

    //     function loadFinishHanlder(){
    //         console.log(arr);
    //         arr.forEach(function(item){
    //             console.log(item.src,item.width);
    //         })
    //     }




    //     var n=1;
    //    var arr=[];
    //    loadImage();
    //     function loadImage(){
    //         var img=new Image();
    //         img.src="./img/"+n+".jpg";
    //         img.addEventListener("load",loadHandler);
    //     }

    //第一次加载,进入后输入第一张图片，然后修改了img.src,图片的src重新加载，然后激活load事件，再修改再激活，直至最后一个没修改，进行输出。

    //     function loadHandler(e){
                //arr.push(this); //this指代的都是当前的照片节点，push进arr中的都是this，会根据this改变而改变
    //         arr.push(this.cloneNode(false)); //而进行克隆之后，会将当前节点进行复制到arr中，不再是this，而是节点，随后this改变不会影响前面
    //         // console.log(this.src)
    //         n++;
    //         if(n>12){
    //             this.removeEventListener("load",loadHandler);
    //             return loadFinishHanlder();
    //         }
    //         this.src="./img/"+n+".jpg";
    //     }

    //     function loadFinishHanlder(){
    //         console.log(arr);
    //         arr.forEach(function(item){
    //             console.log(item.src,item.width);
    //         })
    //     }
        //封装函数写成纯函数==>不会引起外部变量和内部改变的函数

        // var arr=["./img/1.jpg","./img/2.jpg","./img/3.jpg","./img/4.jpg","5"]
        var arr=["1.jpeg","2","3","4","5.jpeg","6"]
        Utils.loadImage(arr,finishHandler,"./img/",".jpg");
        // document.addEventListener(Utils.IMG_FINISH_EVENT,finishHandler);
        // Utils.loadImage(arr);
        function finishHandler(list){
            console.log(list)
        }

        // function finishHandler(e){
        //     console.log(e.finishList)
        // }



    // var str="abc.jpg";
    // console.log(str.slice(-5,-4))
    // console.log(str.slice(-4,-3))



    </script>
</body>

</html>
